# ğŸ§© æ¨¡å—è¯´æ˜ï¼šStreamlit å®æˆ˜ç¯‡ - æ„å»º AI Agent Web åº”ç”¨

> ğŸ“Œ æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šStreamlit åŸºç¡€ç»„ä»¶ï½œå¯¹è¯å¼ UI è®¾è®¡ï½œAgents SDK é›†æˆï½œå¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿï½œçŠ¶æ€æŒä¹…åŒ–ä¸ä¼šè¯ç®¡ç†

---

### 1. `s01_st_basics.py` ï¼ˆStreamlit åŸºç¡€ç»„ä»¶ï¼‰

å…¨é¢ä»‹ç» Streamlit çš„æ ¸å¿ƒ UI ç»„ä»¶ï¼Œä¸ºæ„å»º AI Agent åº”ç”¨æ‰“ä¸‹åŸºç¡€ã€‚

- âœ… æŒæ¡ç‚¹ï¼š
  - ä½¿ç”¨ `st.chat_input` å®ç°ç”¨æˆ·å¯¹è¯è¾“å…¥
  - ä½¿ç”¨ `st.chat_message` åˆ›å»ºå¯¹è¯æ°”æ³¡ï¼Œæ”¯æŒè‡ªå®šä¹‰å¤´åƒ
  - ä½¿ç”¨ `st.status` å®ç°å¯æŠ˜å çš„ä¸­é—´æ­¥éª¤å±•ç¤º
  - ä½¿ç”¨ `st.empty()` åˆ›å»ºåŠ¨æ€å ä½ç¬¦ï¼Œå®ç°å®æ—¶å†…å®¹æ›´æ–°
  - ä½¿ç”¨ `st.session_state` å®ç°è·¨ä¼šè¯çš„çŠ¶æ€æŒä¹…åŒ–
  - ä½¿ç”¨ `st.sidebar` è®¾è®¡ä¾§è¾¹æ å¸ƒå±€
  - ä½¿ç”¨ `st.rerun()` è§¦å‘é¡µé¢é‡æ–°æ¸²æŸ“ï¼Œä¿æŒ UI ä¸çŠ¶æ€åŒæ­¥

- è¾“å‡ºï¼š
  - å±•ç¤ºä¸€ä¸ªåŒ…å«è¾“å…¥æ¡†ã€å¯¹è¯æ°”æ³¡ã€æŠ˜å çŠ¶æ€æ ã€åŠ¨æ€å ä½ç¬¦çš„å®Œæ•´äº¤äº’ç•Œé¢
  - æ¼”ç¤ºä¼šè¯çŠ¶æ€çš„ç®¡ç†å’Œä¾§è¾¹æ çš„è®¾è®¡
  - é™æ€æ¼”ç¤º `st.rerun()` çš„ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹

> ğŸ’¡ æ­¤æ–‡ä»¶æ˜¯ Streamlit çš„å…¥é—¨æŒ‡å—ï¼Œé€‚åˆåˆæ¬¡æ¥è§¦ Streamlit çš„å¼€å‘è€…å¿«é€ŸæŒæ¡æ ¸å¿ƒç»„ä»¶ã€‚

---

### 2. `s02_st_layout_demo.py` ï¼ˆå¸ƒå±€ä¸é¡µé¢é…ç½®ï¼‰

æ¼”ç¤º Streamlit çš„é¡µé¢å¸ƒå±€é…ç½®å’ŒèŠå¤©ç•Œé¢çš„åŸºç¡€æ„å»ºæ–¹å¼ã€‚

- âœ… æŒæ¡ç‚¹ï¼š
  - ä½¿ç”¨ `st.set_page_config` é…ç½®é¡µé¢æ ‡é¢˜å’Œå¸ƒå±€æ¨¡å¼
  - å®ç° `layout="wide"` å®½å±å¸ƒå±€ï¼Œé€‚åˆå¤æ‚åº”ç”¨åœºæ™¯
  - ä½¿ç”¨ `st.sidebar` æ„å»ºä¾§è¾¹æ ç›‘æ§é¢æ¿
  - ä½¿ç”¨ `st.header`ã€`st.subheader`ã€`st.info` è®¾è®¡ä¾§è¾¹æ ä¿¡æ¯å±•ç¤º
  - å®ç°æ¨¡æ‹Ÿçš„èŠå¤©å†å²å±•ç¤ºæµç¨‹

- è¾“å‡ºï¼š
  - ä¸€ä¸ªå¸¦æœ‰ä¸“ä¸šæ ‡é¢˜å’Œä¾§è¾¹æ ç›‘æ§é¢æ¿çš„æ™ºèƒ½å®¢æœé©¾é©¶èˆ±ç•Œé¢
  - å±•ç¤ºç”¨æˆ·å’ŒåŠ©æ‰‹çš„å¯¹è¯æ°”æ³¡æ¨¡æ‹Ÿæ•ˆæœ
  - åŒ…å«ç”¨æˆ·ç”»åƒä¿¡æ¯å±•ç¤ºçš„ä¾§è¾¹æ å¸ƒå±€

> ğŸ’¡ æ­¤ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸“ä¸šçš„ç®¡ç†é©¾é©¶èˆ±ç•Œé¢ï¼Œé€‚åˆéœ€è¦ç›‘æ§åŠŸèƒ½çš„ AI åº”ç”¨åœºæ™¯ã€‚

---

### 3. `s03_agent_single_mvp.py` ï¼ˆå•æ™ºèƒ½ä½“ MVP å®ç°ï¼‰

åŸºäº Agents SDK å®ç°ä¸€ä¸ªå®Œæ•´çš„å•æ™ºèƒ½ä½“å®¢æœç³»ç»Ÿï¼Œé›†æˆ OpenAI å…¼å®¹æ¥å£ã€‚

- âœ… æŒæ¡ç‚¹ï¼š
  - é…ç½® OpenAIChatCompletionsModel å’Œ AsyncOpenAI å®¢æˆ·ç«¯
  - ä½¿ç”¨ DeepSeek æ¨¡å‹æ„å»ºæ™ºèƒ½å®¢æœ Agent
  - å®šä¹‰ Agent çš„ç³»ç»ŸæŒ‡ä»¤ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘åˆ¤æ–­ï¼ˆé€€ç¥¨ã€æ”¹ç­¾ç­‰ï¼‰
  - ä½¿ç”¨ `st.spinner` æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
  - ä½¿ç”¨ `Runner.run_sync` åŒæ­¥æ‰§è¡Œæ™ºèƒ½ä½“ä»»åŠ¡
  - å®ç°èŠå¤©å†å²çš„çŠ¶æ€ç®¡ç†å’Œè‡ªåŠ¨æ¸²æŸ“

- è¾“å‡ºï¼š
  - ä¸€ä¸ªå¯äº¤äº’çš„æ™ºèƒ½èˆªç©ºå®¢æœåŠ©æ‰‹
  - æ”¯æŒé€€ç¥¨ç”³è¯·ã€æ”¹ç­¾æœåŠ¡ç­‰ä¸šåŠ¡åœºæ™¯
  - å®Œæ•´çš„å¯¹è¯å†å²è®°å½•å’Œä¸Šä¸‹æ–‡ç®¡ç†
  - å¸¦ä¾§è¾¹æ ç”¨æˆ·ç”»åƒå±•ç¤ºçš„ç›‘æ§ç•Œé¢

> ğŸ’¡ è¿™æ˜¯æ„å»º AI Agent Web åº”ç”¨çš„åŸºç¡€æ¨¡æ¿ï¼Œå±•ç¤ºäº†å¦‚ä½•å°† Agents SDK ä¸ Streamlit æ— ç¼é›†æˆã€‚

---

### 4. `s04_agent_multi_session.py` ï¼ˆå¤šæ™ºèƒ½ä½“å¤šä¼šè¯ç³»ç»Ÿï¼‰

åŸºäº Agents SDK æ„å»ºå®Œæ•´çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿï¼Œå®ç°æ™ºèƒ½è·¯ç”±å’Œä¼šè¯æŒä¹…åŒ–ã€‚

- âœ… æŒæ¡ç‚¹ï¼š
  - ä½¿ç”¨ `SQLiteSession` å®ç°å¯¹è¯å†å²çš„æ•°æ®åº“æŒä¹…åŒ–
  - å®ç°å¤šæ™ºèƒ½ä½“åä½œï¼ˆTriageAgentã€RefundAgentã€ChangeAgentï¼‰
  - ä½¿ç”¨ `MCP` åè®®è¿æ¥é«˜å¾·åœ°å›¾ç­‰å¤–éƒ¨æœåŠ¡
  - å®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„åŠ¨æ€è½¬æ¥å’ŒçŠ¶æ€åˆ‡æ¢
  - ä½¿ç”¨æµå¼è¾“å‡º `Runner.run_streamed` å®ç°å®æ—¶å“åº”
  - æ•è·å’Œå¤„ç†æ™ºèƒ½ä½“äº‹ä»¶ï¼ˆå·¥å…·è°ƒç”¨ã€è½¬æ¥äº‹ä»¶ï¼‰
  - å®ç°ä¼šè¯ç®¡ç†å’Œå†å²æ¶ˆæ¯å›æ”¾åŠŸèƒ½
  - è®¾è®¡å¯å¤ç”¨çš„ä¾§è¾¹æ æ¸²æŸ“å‡½æ•°

- è¾“å‡ºï¼š
  - å®Œæ•´çš„æ™ºèƒ½èˆªç©ºå®¢æœå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
  - è‡ªåŠ¨æ ¹æ®ç”¨æˆ·éœ€æ±‚è½¬æ¥è‡³å¯¹åº”çš„ä¸“ä¸šåå¸­ï¼ˆé€€ç¥¨ä¸“å‘˜ã€æ”¹ç­¾ä¸“å‘˜ï¼‰
  - å®æ—¶å±•ç¤ºå·¥å…·è°ƒç”¨æ—¥å¿—å’Œæ™ºèƒ½ä½“è½¬æ¥è¿‡ç¨‹
  - æ”¯æŒä¼šè¯å†å²æŒä¹…åŒ–ï¼Œé¡µé¢åˆ·æ–°åä¾ç„¶ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡
  - åŠ¨æ€æ›´æ–°çš„é©¾é©¶èˆ±ç›‘æ§ç•Œé¢ï¼Œæ˜¾ç¤ºå½“å‰åå¸­ã€ç”¨æˆ·ç”»åƒå’Œä¼šè¯ç»Ÿè®¡

> ğŸ’¡ è¿™æ˜¯æ¥è¿‘ç”Ÿäº§ç¯å¢ƒçš„å¤šæ™ºèƒ½ä½“åº”ç”¨ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•æ„å»ºå¯æ‰©å±•ã€å¯ç»´æŠ¤çš„å¤æ‚ AI Agent ç³»ç»Ÿã€‚

---

### ğŸ”” å…¨å±€æ³¨æ„äº‹é¡¹

- **å­¦ä¹ è·¯å¾„å»ºè®®**ï¼š
  `s01.`ï¼ˆåŸºç¡€ç»„ä»¶ï¼‰ â†’ `s02.`ï¼ˆå¸ƒå±€é…ç½®ï¼‰ â†’ `s03.`ï¼ˆå•æ™ºèƒ½ä½“é›†æˆï¼‰ â†’ `s04.`ï¼ˆå¤šæ™ºèƒ½ä½“åä½œï¼‰
- æ‰€æœ‰ `.py` æ–‡ä»¶ä¾èµ–æ ¹ç›®å½• `.env` ä¸­çš„ `OPENAI_API_KEY`
- `s03` å’Œ `s04` ä½¿ç”¨ DeepSeek API ä½œä¸º OpenAI å…¼å®¹ç«¯ç‚¹
- `s04_agent_multi_session.py` éœ€è¦ä¾èµ– `m12_agents_sdk_swarm` æ¨¡å—ä¸­çš„æ™ºèƒ½ä½“å®šä¹‰
- è¿è¡Œå‰ç¡®ä¿å·²å®‰è£…ç›¸å…³ä¾èµ–ï¼š`streamlit`ã€`agents`ã€`openai`ã€`nest-asyncio`

- **è¿è¡Œæ–¹å¼**ï¼š
  ```bash
  cd m13_streamlit
  streamlit run s01_st_basics.py      # åŸºç¡€ç»„ä»¶æ¼”ç¤º
  streamlit run s02_st_layout_demo.py # å¸ƒå±€é…ç½®æ¼”ç¤º
  streamlit run s03_agent_single_mvp.py  # å•æ™ºèƒ½ä½“ MVP
  streamlit run s04_agent_multi_session.py # å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ
  ```

---

### ğŸ’¡ **å»ºè®®**

- å°è¯•æ‰©å±• `s04_agent_multi_session.py`ï¼Œæ·»åŠ æ›´å¤šä¸“ä¸šåå¸­ï¼ˆå¦‚æŠ•è¯‰å¤„ç†ã€è¡ŒææŸ¥è¯¢ï¼‰
- å®éªŒä¸åŒçš„ Agent è·¯ç”±é€»è¾‘ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- å°†çœŸå®çš„æœåŠ¡ APIï¼ˆå¦‚èˆªç­æŸ¥è¯¢ã€æ”¯ä»˜ç³»ç»Ÿï¼‰é›†æˆåˆ°ç³»ç»Ÿä¸­
- æ¢ç´¢ SQLiteSession çš„é«˜çº§ç”¨æ³•ï¼Œå¦‚ä¼šè¯åˆ†æã€å¯¹è¯å¯¼å‡ºç­‰
- è€ƒè™‘æ·»åŠ è¯­éŸ³è¾“å…¥ã€å¤šè¯­è¨€æ”¯æŒç­‰æ‰©å±•åŠŸèƒ½
- ç ”ç©¶ Streamlit çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œæ„å»ºæ›´ä¸°å¯Œçš„å¯è§†åŒ–ç•Œé¢
